{% extends "base.html" %}
{% block title %}{{ profile.user.username }}'s Profile{% endblock %}

{% block content %}
<div class="container py-5">
  <!-- Profile Header -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body d-flex align-items-center flex-wrap">
      <div class="me-4 mb-3 mb-md-0">
        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center shadow-sm"
             style="width:120px; height:120px; font-size:2rem;">
          {{ profile.user.username|first|upper }}
        </div>
      </div>
      <div>
        <h2 class="mb-1">{{ profile.user.username }}</h2>
        {% if profile.headline %}
          <h5 class="text-muted mb-2">{{ profile.headline }}</h5>
        {% endif %}
        {% if profile.location %}
          <p class="mb-2"><i class="bi bi-geo-alt text-secondary"></i> {{ profile.location }}</p>
        {% endif %}
        {% if profile.bio %}
          <p class="text-muted mb-3">{{ profile.bio }}</p>
        {% endif %}
        <a href="{% url 'edit_profile' %}" class="btn btn-outline-primary btn-sm">
          <i class="bi bi-pencil"></i> Edit Profile
        </a>
      </div>
    </div>
  </div>

  <!-- Skills -->
  {% if skills %}
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h4 class="mb-3">ðŸ›  Skills</h4>
      {% for skill in skills %}
        <span class="badge rounded-pill bg-primary me-1 mb-1 px-3 py-2">{{ skill }}</span>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Links -->
  {% if profile.links %}
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h4 class="mb-3">ðŸ”— Links</h4>
      <ul class="list-group list-group-flush">
        {% for link in profile.links.splitlines %}
          <li class="list-group-item">
            <a href="{{ link }}" target="_blank" class="text-decoration-none">
              <i class="bi bi-box-arrow-up-right text-primary me-2"></i>{{ link }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <!-- Education -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h4 class="mb-3">ðŸŽ“ Education</h4>
      {% for edu in profile.education.all %}
        <div class="border-start border-4 border-primary ps-3 mb-3">
          <h5 class="mb-1">{{ edu.school }}</h5>
          <p class="mb-1">
            <strong>Major:</strong> {{ edu.major }}{% if edu.minor %} &nbsp;|&nbsp;
            <strong>Minor:</strong> {{ edu.minor }}{% endif %}
          </p>
          <small class="text-muted">{{ edu.start_date }} â€“ {{ edu.end_date|default:"Present" }}</small>
        </div>
      {% empty %}
        <p class="text-muted">No education details yet.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Work Experience -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h4 class="mb-3">ðŸ’¼ Work Experience</h4>
      {% for work in profile.work_experience.all %}
        <div class="border-start border-4 border-success ps-3 mb-3">
          <h5 class="mb-1">{{ work.position }}</h5>
          <p class="mb-1">
            <strong>Company:</strong> {{ work.company }}
          </p>
          <small class="text-muted">{{ work.start_date }} â€“ {{ work.end_date|default:"Present" }}</small>
          {% if work.description %}
            <p class="mt-2 text-muted">{{ work.description }}</p>
          {% endif %}
        </div>
      {% empty %}
        <p class="text-muted">No work experience added yet.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
